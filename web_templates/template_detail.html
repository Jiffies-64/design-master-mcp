{% extends "base.html" %}

{% block title %}{{ template.name }} - Design Document MCP{% endblock %}

{% block content %}
<div class="header">
    <h1><i class="fas fa-file-alt"></i> Design Document MCP</h1>
    <div class="user-info">
        <span><i class="fas fa-user"></i> 当前用户: <strong>{{ username }}</strong></span>
        <a href="/logout" class="btn btn-warning"><i class="fas fa-sign-out-alt"></i> 退出登录</a>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <div>
            <h2><i class="fas fa-file-alt"></i> {{ template.name }}</h2>
            <p>{{ template.description }}</p>
        </div>
        <div>
            {% if template.is_public %}
            <span class="btn btn-success" style="cursor: default;"><i class="fas fa-globe"></i> 公开模板</span>
            {% else %}
            <span class="btn btn-outline" style="cursor: default;"><i class="fas fa-lock"></i> 私有模板</span>
            {% endif %}
        </div>
    </div>
    
    <div class="mb-30">
        <h3><i class="fas fa-user"></i> 创建者: {{ template.user.username }}</h3>
    </div>
    
    <div class="card">
        <h3><i class="fas fa-file-code"></i> 模板内容预览</h3>
        <pre style="background: var(--light); padding: 15px; border-radius: var(--border-radius); white-space: pre-wrap;">{{ template.content }}</pre>
    </div>
    
    <div class="form-row">
        <div class="form-col">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-tags"></i> 占位符 ({{ placeholders|length }})</h3>
                </div>
                {% if placeholders %}
                <ul style="list-style: none; padding: 0;">
                    {% for placeholder in placeholders %}
                    <li style="padding: 10px 0; border-bottom: 1px solid var(--light-gray);">
                        <strong>{{ placeholder.name }}</strong>
                        <p style="margin: 5px 0; color: var(--gray);">{{ placeholder.description }}</p>
                        {% if placeholder.example %}
                        <div style="background: var(--light); padding: 8px; border-radius: var(--border-radius); font-size: 0.9rem;">
                            <strong>示例:</strong> {{ placeholder.example }}
                        </div>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="text-center" style="color: var(--gray); padding: 20px;">该模板没有定义占位符</p>
                {% endif %}
            </div>
        </div>
        
        <div class="form-col">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-list-ol"></i> 提示词 ({{ prompts|length }})</h3>
                </div>
                {% if prompts %}
                <ol style="padding: 0 0 0 20px;">
                    {% for prompt in prompts %}
                    <li style="padding: 10px 0; border-bottom: 1px solid var(--light-gray);">
                        {{ prompt.content }}
                    </li>
                    {% endfor %}
                </ol>
                {% else %}
                <p class="text-center" style="color: var(--gray); padding: 20px;">该模板没有定义提示词</p>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="text-center">
        <a href="/templates/market" class="btn">
            <i class="fas fa-arrow-left"></i> 返回模板市场
        </a>
    </div>
</div>
{% endblock %}